@echo off
chcp 65001 >nul
REM ============================================================================
REM MyBazaar è§’è‰²ç®¡ç†ç³»ç»Ÿå¿«é€Ÿä¿®å¤æŒ‡å— (Windows ç‰ˆæœ¬)
REM ä½¿ç”¨å‰è¯·ç¡®ä¿å·²å¤‡ä»½æ‰€æœ‰æ–‡ä»¶ï¼
REM ============================================================================

echo.
echo ============================================================================
echo ğŸš€ MyBazaar è§’è‰²ç®¡ç†ç³»ç»Ÿä¿®å¤æŒ‡å—
echo ============================================================================
echo.

REM ============================================================================
REM Step 1: å¤‡ä»½ç°æœ‰æ–‡ä»¶
REM ============================================================================
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ“¦ Step 1: å¤‡ä»½ç°æœ‰æ–‡ä»¶
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

echo è¯·æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå¤‡ä»½ï¼š
echo.
echo cd functions\src
echo copy admin.js admin.js.backup_%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%
echo.
echo cd ..\..\src\views\EventManager
echo copy UserManagement.jsx UserManagement.jsx.backup_%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%
echo.
echo cd ..\..\..
echo.

pause

REM ============================================================================
REM Step 2: æ˜¾ç¤ºéœ€è¦æ‰‹åŠ¨ä¿®æ”¹çš„ä½ç½®
REM ============================================================================
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ“ Step 2: éœ€è¦æ‰‹åŠ¨ä¿®æ”¹çš„æ–‡ä»¶
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚ ğŸ“„ æ–‡ä»¶ 1: functions\src\admin.js                       â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ã€ä¿®æ”¹ Aã€‘æ›¿æ¢ updateUserRoles å‡½æ•°
echo   ä½ç½®: ç¬¬ 2675-2835 è¡Œ
echo   æ“ä½œ: åˆ é™¤è¿™äº›è¡Œï¼Œæ›¿æ¢ä¸º updateUserRoles_fixed.js çš„å†…å®¹
echo.
echo ã€ä¿®æ”¹ Bã€‘createEventByPlatformAdminHttp å‡½æ•°
echo   ä½ç½®: ç¬¬ 3234 è¡Œ
echo   ä¿®æ”¹å‰: roles: ['eventManager'],
echo   ä¿®æ”¹å: roles: ['eventManager', 'seller', 'customer'],
echo.
echo   ä½ç½®: ç¬¬ 3251 è¡Œä¹‹åæ’å…¥ä»¥ä¸‹ä»£ç ï¼š
echo   // åˆå§‹åŒ– seller è´¦æˆ·
echo   seller: {
echo     availablePoints: 0,
echo     totalPointsSold: 0,
echo     transactions: {}
echo   },
echo   // åˆå§‹åŒ– customer è´¦æˆ·
echo   customer: {
echo     availablePoints: 0,
echo     totalPointsSpent: 0,
echo     transactions: {}
echo   },
echo.
echo   å‚è€ƒæ–‡ä»¶: createEventManager_fixed_snippet.js
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo.
echo â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
echo â”‚ ğŸ“„ æ–‡ä»¶ 2: src\views\EventManager\UserManagement.jsx    â”‚
echo â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
echo.
echo ã€ä¿®æ”¹ Aã€‘æ·»åŠ æ–°çš„ state (ç¬¬ 87 è¡Œé™„è¿‘)
echo   const [isModifyingOwnRoles, setIsModifyingOwnRoles] = useState(false);
echo.
echo ã€ä¿®æ”¹ Bã€‘æ›´æ–° openRoleModal å‡½æ•° (ç¬¬ 213-228 è¡Œ)
echo   å‚è€ƒ: UserManagement_fixed.jsx
echo.
echo ã€ä¿®æ”¹ Cã€‘æ›´æ–° handleSaveRoles å‡½æ•° (ç¬¬ 254-307 è¡Œ)
echo   å‚è€ƒ: UserManagement_fixed.jsx
echo.
echo ã€ä¿®æ”¹ Dã€‘æ›´æ–°è§’è‰²é€‰æ‹© UI (åœ¨ showRoleModal çš„ return éƒ¨åˆ†)
echo   å‚è€ƒ: UserManagement_fixed.jsx
echo.
echo å®Œæ•´å‚è€ƒæ–‡ä»¶: UserManagement_fixed.jsx
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

pause

REM ============================================================================
REM Step 3: éƒ¨ç½²æç¤º
REM ============================================================================
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ“¦ Step 3: ä¿®æ”¹å®Œæˆåçš„éƒ¨ç½²å‘½ä»¤
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo ã€éƒ¨ç½² Cloud Functionsã€‘
echo   cd functions
echo   firebase deploy --only functions:updateUserRoles,functions:createEventByPlatformAdminHttp
echo.
echo ã€éƒ¨ç½²å‰ç«¯ã€‘(å¦‚éœ€è¦)
echo   cd ..
echo   npm run build
echo   firebase deploy --only hosting
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

pause

REM ============================================================================
REM Step 4: æµ‹è¯•æç¤º
REM ============================================================================
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo ğŸ§ª Step 4: éƒ¨ç½²å®Œæˆåè¿›è¡Œæµ‹è¯•
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo âœ… æµ‹è¯•æ¸…å•ï¼š
echo   [ ] 1. Event Manager å¯ä»¥ä¿®æ”¹å…¶ä»–ç”¨æˆ·è§’è‰²
echo   [ ] 2. æ–°åˆ›å»ºçš„ Event Manager è‡ªåŠ¨æ‹¥æœ‰ seller å’Œ customer è§’è‰²
echo   [ ] 3. Event Manager ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„è§’è‰²ï¼ˆå‰ç«¯ UI ç¦ç”¨ + åç«¯éªŒè¯ï¼‰
echo   [ ] 4. Event Manager ä¸èƒ½åŒæ—¶æ‹¥æœ‰å…¶ä»– manager è§’è‰²
echo   [ ] 5. Event Manager å¯ä»¥æ‹¥æœ‰ seller/customer å‚ä¸è€…è§’è‰²
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.

REM ============================================================================
REM å®Œæˆ
REM ============================================================================
echo.
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo âœ… ä¿®å¤æŒ‡å—å·²å®Œæˆ
echo â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
echo.
echo ğŸ“š è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹: ROLE_MANAGEMENT_FIX_GUIDE.md
echo.
echo âš ï¸  é‡è¦æé†’:
echo   - ä¿®æ”¹å‰è¯·åŠ¡å¿…å¤‡ä»½æ–‡ä»¶
echo   - ä½¿ç”¨ VS Code æˆ–å…¶ä»–ä»£ç ç¼–è¾‘å™¨è¿›è¡Œä¿®æ”¹
echo   - æµ‹è¯•æ‰€æœ‰åŠŸèƒ½åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
echo   - ç›‘æ§ Cloud Functions æ—¥å¿—ç¡®ä¿æ— é”™è¯¯
echo.
echo ğŸ’¡ æ¨èå·¥å…·:
echo   - VS Code (å…è´¹ä»£ç ç¼–è¾‘å™¨)
echo   - Git Bash (å¦‚æœå®‰è£…äº† Git for Windows)
echo   - Windows Terminal (Windows 11 è‡ªå¸¦)
echo.

pause
