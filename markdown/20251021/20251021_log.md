# 明確的 request-level 日誌（當前 logs 已顯示「未驗證」）
```
PS C:\mybazaar20> gcloud functions logs read loginEventManagerHttp --region=us-central1 --project=mybazaar-c4881 --limit=200
LEVEL    NAME                   EXECUTION_ID  TIME_UTC                 LOG
WARNING  logineventmanagerhttp                2025-10-21 10:49:05.216  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:45:54.928  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:45:48.488  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:45:45.643  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:43:15.606  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:42:35.989  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-21 10:32:03.446  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-21 10:32:02.284  Starting new instance. Reason: AUTOSCALING - Instance started due to configured scaling factors (e.g. CPU utilization, request throughput, etc.) or no existing capacity for current traffic.
I        logineventmanagerhttp                2025-10-21 10:32:02.104
WARNING  logineventmanagerhttp                2025-10-21 10:25:12.110  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 10:23:06.540  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 08:39:57.044  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 08:32:06.612  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 05:06:03.137  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 05:04:23.455  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-21 05:00:52.342  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-21 04:58:07.282  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-21 04:58:05.640  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
WARNING  logineventmanagerhttp                2025-10-21 04:34:11.842  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:28:20.794  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:27:37.226  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:27:24.472  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:24:52.219  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:13:55.980  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 14:11:38.838  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 14:11:37.242  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
WARNING  logineventmanagerhttp                2025-10-20 14:07:15.077  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:05:24.099  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:02:19.724  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:00:25.270  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 14:00:06.571  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 13:59:01.731  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 13:58:59.969  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
WARNING  logineventmanagerhttp                2025-10-20 13:52:44.675  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 13:41:00.285  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 13:40:41.687  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 13:34:50.895  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:50:28.668  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:47:17.810  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:35:16.297  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:29:00.328  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 12:21:05.890  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 12:21:04.953  Starting new instance. Reason: AUTOSCALING - Instance started due to configured scaling factors (e.g. CPU utilization, request throughput, etc.) or no existing capacity for current traffic.
WARNING  logineventmanagerhttp                2025-10-20 12:20:09.231  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:16:33.730  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:14:59.396  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 12:10:05.333  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 11:43:22.540  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 11:41:07.442  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 11:41:05.801  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
WARNING  logineventmanagerhttp                2025-10-20 10:27:14.170  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 10:00:51.426  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 09:40:26.594  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 08:46:12.209  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 08:38:08.485  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
WARNING  logineventmanagerhttp                2025-10-20 08:38:08.349  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 08:38:07.348  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 08:38:05.581  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
WARNING  logineventmanagerhttp                2025-10-20 08:07:57.677  The request was not authenticated. Either allow unauthenticated invocations or set the proper Authorization header. Read more at https://cloud.google.com/run/docs/securing/authenticating Additional troubleshooting documentation can be found at: https://cloud.google.com/run/docs/troubleshooting#unauthorized-client
I        logineventmanagerhttp                2025-10-20 07:13:55.851  Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
I        logineventmanagerhttp                2025-10-20 07:13:54.091  Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
```
# firebase.json
```
{
  "firestore": {
    "database": "(default)",
    "location": "asia-southeast1",
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "functions": [
    {
      "source": "functions",
      "codebase": "default",
      "runtime": "nodejs22",
      "region": "asia-southeast1",
      "endpoints": {
        "loginEventManager": {
          "httpsOptions": {
            "invoker": [
              "hosting-invoker@mybazaar-c4881.iam.gserviceaccount.com"
            ]
          },
          "region": "us-central1"
        },
        "loginEventManagerHttp": {
          "httpsOptions": {
            "invoker": ["public"]
          },
          "region": "us-central1"
        },
        "pingHttp": {
          "httpsOptions": {
            "invoker": ["public"]
          },
          "region": "us-central1"
        }
      },
      "ignore": [
        "node_modules",
        ".git",
        "firebase-debug.log",
        "firebase-debug.*.log",
        "*.local"
      ]
    }
  ],
  "hosting": {
    "public": "dist",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "rewrites": [
      {
        "source": "/api/loginEventManager",
        "function": {
          "functionId": "loginEventManager",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/loginEventManagerHttp",
        "function": {
          "functionId": "loginEventManagerHttp",
          "region": "us-central1"
        }
      },
      {
        "source": "/api/ping",
        "function": {
          "functionId": "pingHttp",
          "region": "us-central1"
        }
      },
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  },
  "emulators": {
    "auth": {
      "port": 9099
    },
    "functions": {
      "port": 5001
    },
    "firestore": {
      "port": 8081
    },
    "ui": {
      "enabled": true,
      "port": 4000
    },
    "singleProjectMode": true
  }
}
```
